# 第二讲：SLAM框架

标签（空格分隔）：SLAM

---
**RGBD相机**用物理的方法（激光）得到深度
**双目相机**用算法（三角法）得到深度

**单目slam的局限**
 1. 尺度不确定性：把相机的运动和场景大小乘以任意倍数，单目相机所看到的像是一样的。所以单目slam估计的轨迹和地图与真实的轨迹和地图相差一个因子——尺度
 2. 平移之后（形成视差）才能计算深度
**经典SLAM框架**

```seq
传感器数据->前端视觉里程计:
传感器数据->回环检测: 
前端视觉里程计->后端非线性优化:
回环检测->后端非线性优化: 
后端非线性优化->建图: 
```

```flow
st=>start: start
cond=>condition: 传感器数据：图像读取和预处理、IMU
op1=>operation: 前段：VO,估算相邻图像的相机运动，及局部地图
op2=>operation: 后端：非线性优化，接受VO及回环检测的信息，优化出全局一致的轨迹和地图
op3=>operation: 回环检测
op4=>operation: 建图
end=>end: end

st->cond
cond(yes)->op1->op2->op4->end
cond(no)->op3->op2
```

建图

 1. 度量地图：
 稀疏Sparse只表现路标，非路标部分忽略；稠密Dense建模所有看到的东西。
定位用稀疏足够，导航需要稠密。
稠密地图分为小块，二维是小格子grid，三维小方块voxel，每小块有占据、空闲、未知三种状态来表达该块内是否有物体。
 2. 拓扑地图
 一个图Graph，节点和边组成，只考虑节点间的连通性。